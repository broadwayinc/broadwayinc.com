<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/modern-init-css@latest/init.css">
<link rel="stylesheet" href="../style.css">
<script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>

<script>
    const skapi = new Skapi("ap220VneiKiyIzgLeFEc", "f8e16604-69e4-451c-9d90-4410f801c006");
</script>
<main id="menu" hidden>
    <style>
        main {
            width: 400px;
        }
    </style>
    <h2 style="margin: 0">Skapi Admin Page</h2>
    <hr>
    <ul>
        <li>
            <a href="/admin/info.html">Skapi Information</a>
        </li>
        <li>
            <a href="/admin/users.html">User List</a>
        </li>
        <li>
            <a href="/admin/deploy.html">Deploy Website</a>
        </li>
        <li>
            <a href="/admin/tickets.html">Tickets</a>
        </li>
        <li>
            <a href="/pp/skapi.html">Skapi Privacy Policy</a>
        </li>
        <li>
            <a href="/admin/html-sem.html">HTML Guides</a>
        </li>
        <br>
        <li>
            <a href="/admin/change-password.html">Change Password</a>
        </li>
        <li>
            <a href="/admin/index.html" onclick="logout(event);">Logout</a>
        </li>
    </ul>
</main>
<script>
    function logout(e) {
        e.preventDefault();
        skapi.logout().then(() => {
            window.location.href = "/admin/login.html";
        });
    }

    skapi.getProfile().then(u => {
        if (!u) {
            window.location.href = "/admin/login.html";
            return;
        }
        document.getElementById("menu").hidden = false;
    })
</script>