<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/style-blank@latest/blank.css">
<link rel="stylesheet" href="../style.css">
<script src="https://cdn.jsdelivr.net/npm/skapi-js@latest/dist/skapi.js"></script>
<script src="/skapi.js"></script>

<main id="menu" hidden>
    <style>
        main {
            width: 400px;
        }
    </style>
    <h2 style="margin: 0">Skapi Admin Page</h2>
    <hr>
    <ul>
        <li>
            <a href="/admin/info.html">Skapi Information</a>
        </li>
        <li>
            <a href="/admin/users.html">User List</a>
        </li>
        <!-- <li>
            <a href="/admin/deploy.html">Deploy Website</a>
        </li> -->
        <li>
            <a href="/admin/serviceinfo.html">Service Info</a>
        </li>
        <li>
            <a href="/admin/tickets.html">Tickets</a>
        </li>
        <li>
            <a href="/admin/register-logger.html">OpenID Loggers</a>
        </li>
        <li>
            <a href="/pp/skapi.html">Skapi Privacy Policy</a>
        </li>
        <li>
            <a href="/admin/unlimited.html">Grant Unlimited</a>
        </li>
        <!-- <li>
            <a href="/admin/html-sem.html">HTML Guides</a>
        </li> -->
        <!-- <li>
            <a href="/admin/deploy-skapi-js-beta.html">Deploy Vivi's skapi-js</a>
        </li> -->
        <!-- <li>
            <a href="/admin/deploy-skapi-bleeding-edge.html">Deploy Test Backend</a>
        </li> -->
        <br>
        <li>
            <a href="/admin/change-password.html">Change Password</a>
        </li>
        <li>
            <a href="/admin/index.html" onclick="logout(event);">Logout</a>
        </li>
    </ul>
</main>
<script>
    function logout(e) {
        e.preventDefault();
        skapi.logout().then(() => {
            window.location.href = "/admin/login.html";
        });
    }

    skapi.getProfile().then(u => {
        if (!u) {
            window.location.href = "/admin/login.html";
            return;
        }
        document.getElementById("menu").hidden = false;
    })
</script>